package com.project.test;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.project.bean.BackStageBean;
import com.project.bean.PartingSpaceBean;
import com.project.bean.RearLoginLogBean;
import com.project.bean.RearOperationLogBean;
import com.project.bean.RentInforBean;
import com.project.dao.ITenantDao;
import com.project.service.IApprovalOpinionService;
import com.project.service.IBackService;
import com.project.service.IRearLogService;

import java.util.List;

import org.junit.Test;

public class TestMain{
	
	//修改后台管理员的密码、电话号码
	@Test
	public void test(){
		
		ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IBackService service= context.getBean("backServiceImpl",IBackService.class);
		BackStageBean bsb = new BackStageBean();
		bsb.setId(1);
		bsb.setPhone("123456");
		service.ChangeInfo(bsb);
	
	}

	//查看所有的个人招租车位信息
	@Test
	public void test2(){
	   ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IApprovalOpinionService service = context.getBean("approvalOpinionServiceImpl",IApprovalOpinionService.class);
		List<PartingSpaceBean> list = service.findAll();                 
		//approvalOpinionServiceImpl    ApprovalProxy
		for (PartingSpaceBean partingSpaceBean : list) {
			System.out.println(partingSpaceBean);
		}
	}
	
	//查询需要审批的包租婆添加的所有私人招租车位信息+包租婆的个人信息
	@Test
	public void test3(){
		ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IApprovalOpinionService service = context.getBean("approvalOpinionServiceImpl",IApprovalOpinionService.class);
		List<PartingSpaceBean> list = service.queryParking(1);
		
		for (PartingSpaceBean partingSpaceBean : list) {
			System.out.println(partingSpaceBean);
		}
	}
	
	
	//记录后台登录日志
	@Test
	public void test4(){
		ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IRearLogService service = context.getBean("rearLogServiceImpl",IRearLogService.class);
		
		RearLoginLogBean rll = new RearLoginLogBean();
		rll.setAddr("成都.金堂");
		rll.setName("陌沫");
		rll.setFlag(1);	
		boolean row = service.insertRegisterLog(rll);
		
		System.out.println(row);
	}
	
	//查看后台登录日志
	@Test
	public void test5(){
		ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IRearLogService service = context.getBean("rearLogServiceImpl",IRearLogService.class);
		
		int index = 1;
		List<RearLoginLogBean> list = service.queryRegisterLog(index);
		
		for (RearLoginLogBean rearLoginLogBean : list) {
			System.out.println(rearLoginLogBean);
		}
	}
	
	
	//记录后台操作日志
	@Test
	public void test6(){
		ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IRearLogService service = context.getBean("rearLogServiceImpl",IRearLogService.class);
		
		RearOperationLogBean rol = new RearOperationLogBean();
		rol.setModule("修改后台管理员的密码、电话号码的模块");
		rol.setOperation("修改后台管理员的密码、电话号码");
		rol.setFlag(1);
		
		boolean row = service.insertOperationLog(rol);
		
	}
	
	
	//查看后台操作日志
	@Test
	public void test7(){
		ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IRearLogService service = context.getBean("rearLogServiceImpl",IRearLogService.class);
		
		int index = 1;
		List<RearOperationLogBean> list = service.queryOperationLog(index);
		 
		for (RearOperationLogBean rearOperationLogBean : list) {
			System.out.println(rearOperationLogBean);
		}
	}
	
	 //查看后台登录日志的总页数
    @Test
    public void test8(){
    	ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IRearLogService service = context.getBean("rearLogServiceImpl",IRearLogService.class);
		
		int pages = service.findLoginLogTotalPage();
		System.out.println("总页数pages="+pages);
    }
    
    //查看后台操作日志的总页数
    @Test
    public void test9(){
    	ApplicationContext context = new ClassPathXmlApplicationContext("config/applicationContext.xml");
		IRearLogService service = context.getBean("rearLogServiceImpl",IRearLogService.class);
		
		int pages = service.findRealOperationTotalPage();
		System.out.println("总页数pages="+pages);
    }
	
}
